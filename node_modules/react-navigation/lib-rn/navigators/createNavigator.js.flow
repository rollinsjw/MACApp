/* @flow */

<<<<<<< HEAD
import React from 'react';
=======
import * as React from 'react';
>>>>>>> a622a84fa9b65a4b43e8645addefe35ee1624fe7

import type {
  NavigationRouter,
  NavigationNavigator,
  NavigationNavigatorProps,
  NavigationRouteConfigMap,
<<<<<<< HEAD
=======
  NavigationState,
  NavigationScreenProp,
>>>>>>> a622a84fa9b65a4b43e8645addefe35ee1624fe7
} from '../TypeDefinition';

import type { NavigatorType } from './NavigatorTypes';

<<<<<<< HEAD
/**
 * Creates a navigator based on a router and a view that renders the screens.
 */
export default function createNavigator<C: *, S, A, NavigatorConfig, Options>(
  router: NavigationRouter<S, A, Options>,
  routeConfigs?: NavigationRouteConfigMap,
  navigatorConfig?: NavigatorConfig,
  navigatorType?: NavigatorType
) {
  return (
    NavigationView: ReactClass<C>
  ): NavigationNavigator<C, S, A, Options> => {
    class Navigator extends React.Component {
      props: NavigationNavigatorProps<Options, S>;

=======
// Props we want createNavigator to Inject
type RouterProp<S: NavigationState, O: {}> = {
  router: NavigationRouter<S, O>,
};

// NavigatorCreator type
type _NavigatorCreator<NavigationViewProps: {}, S: NavigationState, O: {}> = (
  NavigationView: React.ComponentType<RouterProp<S, O> & NavigationViewProps>
) => NavigationNavigator<S, O, NavigationViewProps>;

/**
 * Creates a navigator based on a router and a view that renders the screens.
 */
export default function createNavigator<
  S: NavigationState,
  O: {},
  NavigatorConfig: {},
  NavigationViewProps: NavigationNavigatorProps<O, S>
>(
  router: NavigationRouter<S, O>,
  routeConfigs?: NavigationRouteConfigMap,
  navigatorConfig?: NavigatorConfig,
  navigatorType?: NavigatorType
): _NavigatorCreator<NavigationViewProps, S, O> {
  return (
    NavigationView: React.ComponentType<RouterProp<S, O> & NavigationViewProps>
  ): NavigationNavigator<S, O, NavigationViewProps> => {
    class Navigator extends React.Component<NavigationViewProps> {
>>>>>>> a622a84fa9b65a4b43e8645addefe35ee1624fe7
      static router = router;

      static routeConfigs = routeConfigs;
      static navigatorConfig = navigatorConfig;
      static navigatorType = navigatorType;
<<<<<<< HEAD
=======
      static navigationOptions = null;
>>>>>>> a622a84fa9b65a4b43e8645addefe35ee1624fe7

      render() {
        return <NavigationView {...this.props} router={router} />;
      }
    }

    return Navigator;
  };
}
